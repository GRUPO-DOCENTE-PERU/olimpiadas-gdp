<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üèÜ Podio Olimpiadas GDP</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: radial-gradient(circle at bottom, #081133, #0a0a1d 70%);
      font-family: 'Poppins', sans-serif;
      color: #fff;
    }

    h1 {
      text-align: center;
      margin-top: 20px;
      font-size: 3em;
      color: #ffd700;
      text-shadow: 0 0 10px #ffd700, 0 0 20px #ffcc33;
      letter-spacing: 2px;
      z-index: 2;
      position: relative;
    }

    .podio-container {
      display: flex;
      justify-content: space-around;
      align-items: flex-end;
      width: 90%;
      height: 420px;
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
      transition: all 0.5s ease;
    }

    .podio {
      width: 18%;
      border-radius: 10px 10px 0 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      transition: transform 1s ease-in-out, height 1s ease-in-out;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
      transform: translateY(500px);
      opacity: 0;
      text-align: center;
    }

    .animate { transform: translateY(0); opacity: 1; }

    /* Colores por puesto */
    .puesto-1 { background: linear-gradient(180deg, #fff58e, #d4af37 60%, #a67c00); }
    .puesto-2 { background: linear-gradient(180deg, #f5f5f5, #c0c0c0 60%, #8f8f8f); }
    .puesto-3 { background: linear-gradient(180deg, #ffcc99, #b87333 60%, #7b3f00); }
    .puesto-4 { background: linear-gradient(180deg, #8fc6ff, #3b6edc 60%, #274b8f); }

    .copa {
      position: absolute;
      bottom: 100%;
      transform: translateY(10px);
      filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4));
      transition: transform 0.8s ease;
    }

    .podio:hover .copa { transform: translateY(-10px); }

    /* Tama√±os graduales */
    .puesto-1 .copa { width: 130px; }
    .puesto-2 .copa { width: 120px; }
    .puesto-3 .copa { width: 95px; }
    .puesto-4 .copa { width: 80px; }

    .info {
      position: absolute;
      top: -220px;
      text-align: center;
    }

    .nombre {
      font-size: 1.5em;
      font-weight: bold;
      text-shadow: 0 2px 4px #000;
      color: #fff;
    }

    .puntos {
      font-size: 2.2em;
      color: #fff;
      font-weight: bold;
      text-shadow: 0 2px 3px #000;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 100%;
    }

    .linea-base {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 8px;
      background: linear-gradient(90deg, #ffd700, #ffffff, #ffd700);
      box-shadow: 0 0 15px #ffd700, 0 0 30px #ffcc33;
      z-index: 3;
    }

    #particles, #confeti {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle, .confeti {
      position: absolute;
      border-radius: 50%;
    }

    .particle {
      width: 4px; height: 4px;
      background: radial-gradient(circle, #ffd700, transparent);
      opacity: 0.8;
      animation: floatUp linear infinite;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) scale(1); opacity: 1; }
      100% { transform: translateY(-100vh) scale(0.3); opacity: 0; }
    }

    .confeti {
      width: 6px;
      height: 12px;
      opacity: 0.9;
      animation: fallDown linear forwards;
    }

    @keyframes fallDown {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }

    /* ====== üîπ ESTILOS RESPONSIVE ====== */
    @media (max-width: 1024px) {
      h1 { font-size: 2.5em; }
      .podio-container { width: 95%; height: 350px; }
      .nombre { font-size: 1.8em; }
      .puntos { font-size: 1.8em; }
      .info { top: -180px; }
      .puesto-1 .copa { width: 110px; }
      .puesto-2 .copa { width: 100px; }
      .puesto-3 .copa { width: 85px; }
      .puesto-4 .copa { width: 70px; }
    }

    @media (max-width: 768px) {
      h1 { font-size: 2em; }
      .podio-container { height: 320px; gap: 10px; margin-top: 0em; }
      .podio { width: 20%; }
      .nombre { font-size: 1.2em; }
      .puntos { font-size: 1.6em; }
      .info { top: -160px; }
    }

    @media (max-width: 600px) {
      html, body { overflow-y: 0; }
      .podio-container {
        flex-wrap: wrap;
        height: auto;
        bottom: auto;
        top: 100px;
        gap: 10px;
      }
      .podio {
        width: 40%;
        height: 180px !important;
        margin-bottom: 20px;
        margin-top: 6em;
      }
      .info { top: -120px; }
      .nombre { font-size: 1em; }
      .puntos { font-size: 1.4em; }
      .copa { width: 70px !important; }
    }

    @media (max-width: 400px) {
      h1 { font-size: 1.6em; margin-top: 10px; }
      .podio { width: 45%; height: 150px !important; }
      .nombre { font-size: 0.9em; }
      .puntos { font-size: 1.2em; }
      .info { top: -100px; }
      .copa { width: 60px !important; }
    }
  </style>
</head>
<body>

  <div id="particles"></div>
  <div id="confeti"></div>

  <h1>üèÖ OLIMPIADAS GDP</h1>

  <button id="btnActualizar" class="btn-actualizar">üîÑ Actualizar</button>

  <style>
    .btn-actualizar {
      position: fixed;
      top: 22px;
      right: 22px;
      z-index: 50;
      background: rgba(255, 255, 255, 0.08);
      color: #f8d85a;
      border: 1px solid rgba(255, 215, 0, 0.25);
      padding: 6px 14px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 500;
      font-size: 14px;
      letter-spacing: 0.3px;
      backdrop-filter: blur(8px);
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(255, 215, 0, 0.15);
    }

    .btn-actualizar:hover {
      background: rgba(255, 215, 0, 0.25);
      color: #fff;
      box-shadow: 0 0 14px rgba(255, 215, 0, 0.4);
      transform: scale(1.05);
    }

    .btn-actualizar:active {
      transform: scale(0.96);
      box-shadow: 0 0 6px rgba(255, 215, 0, 0.3);
    }

    /* üîπ Ajuste RESPONSIVE para pantallas menores a 768px */
    @media (max-width: 768px) {
      .btn-actualizar {display: none;}
    }
  </style>



  <div class="podio-container" id="podio-container"></div>
  <div class="linea-base"></div>

  <script>
    const SHEET_URL = "https://opensheet.elk.sh/1JgPv5NbLDZ-cqsqFprn9PFz8ncopcQEAEpmJuwrx5qU/RESULTADOS";
    const contenedor = document.getElementById("podio-container");
    const coloresPorPuesto = ["puesto-1", "puesto-2", "puesto-3", "puesto-4"];
    const copasPorPuesto = [
      "./puesto1.png",
      "./puesto2.png",
      "./puesto3.png",
      "https://cdn-icons-png.flaticon.com/512/1828/1828640.png"
    ];

    let equipos = [];
    let MAX_PUNTOS = 35;

    // üü¢ Cargar datos
    async function cargarDatos() {
      try {
        const res = await fetch(`${SHEET_URL}?t=${Date.now()}`, { cache: "no-store" });
        const data = await res.json();

        equipos = data.map(item => ({
          nombre: item.nombre,
          puntos: parseInt(item.puntos) || 0
        }));

        if (data[0]?.max_puntos) MAX_PUNTOS = parseInt(data[0].max_puntos) || 35;
        renderPodio();

        // Mensaje visual breve
        const btn = document.getElementById("btnActualizar");
        btn.textContent = " Actualizando...";
        setTimeout(() => (btn.textContent = "Actualizar"), 1500);
      } catch (e) {
        console.error("Error al cargar datos:", e);
        contenedor.innerHTML = "<p style='color:red'>Error al cargar datos üò¢</p>";
      }
    }

    // üèÜ Renderizar podio
    function renderPodio() {
      equipos.sort((a, b) => b.puntos - a.puntos);
      contenedor.innerHTML = "";
      equipos.forEach((e, i) => {
        const podio = document.createElement("div");
        const claseColor = coloresPorPuesto[i] || "puesto-4";
        podio.className = `podio ${claseColor}`;
        podio.style.height = `${(e.puntos / MAX_PUNTOS) * 380}px`;

        const copa = document.createElement("img");
        copa.src = copasPorPuesto[i] || copasPorPuesto[copasPorPuesto.length - 1];
        copa.className = "copa";

        const info = document.createElement("div");
        info.className = "info";

        const nombre = document.createElement("div");
        nombre.className = "nombre";
        nombre.textContent = e.nombre;

        const puntos = document.createElement("div");
        puntos.className = "puntos";
        puntos.textContent = `${e.puntos} pts`;

        info.appendChild(nombre);
        podio.appendChild(info);
        podio.appendChild(copa);
        podio.appendChild(puntos);
        contenedor.appendChild(podio);

        setTimeout(() => podio.classList.add("animate"), i * 400 + 500);
        if (i === equipos.length - 1) {
          setTimeout(lanzarConfeti, i * 400 + 2000);
        }
      });
    }

    // üéâ Confeti
    const confetiContainer = document.getElementById("confeti");
    function lanzarConfeti() {
      for (let i = 0; i < 120; i++) {
        const confeti = document.createElement("div");
        confeti.classList.add("confeti");
        const color = Math.random() > 0.5 ? "#FFD700" : "#C0C0C0";
        confeti.style.background = color;
        confeti.style.left = `${Math.random() * 100}%`;
        confeti.style.animationDuration = `${3 + Math.random() * 4}s`;
        confeti.style.transform = `rotate(${Math.random() * 360}deg)`;
        confetiContainer.appendChild(confeti);
        setTimeout(() => confeti.remove(), 6000);
      }
    }

    // ‚ú® Fondo
    const particleContainer = document.getElementById("particles");
    function createParticle() {
      const particle = document.createElement("div");
      particle.classList.add("particle");
      const size = Math.random() * 5 + 2;
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      particle.style.left = `${Math.random() * 100}%`;
      particle.style.animationDuration = `${5 + Math.random() * 5}s`;
      particle.style.opacity = Math.random();
      particleContainer.appendChild(particle);
      setTimeout(() => particle.remove(), 10000);
    }
    setInterval(createParticle, 100);

    // üöÄ Inicializar
    cargarDatos();

    // üß© Vincular evento del bot√≥n (seguro y moderno)
    document.getElementById("btnActualizar").addEventListener("click", () => {
      contenedor.innerHTML = "<p style='color:white'>Actualizando...</p>";
      cargarDatos();
    });
  </script>

</body>
</html>


